(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{25:function(t,n){var e={};function r(t,n,e){this.x=t,this.y=n,this.z=e}r.prototype.dot2=function(t,n){return this.x*t+this.y*n},r.prototype.dot3=function(t,n,e){return this.x*t+this.y*n+this.z*e};var o=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],a=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],i=new Array(512),c=new Array(512);e.seed=function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var n=0;n<256;n++){var e;e=1&n?a[n]^255&t:a[n]^t>>8&255,i[n]=i[n+256]=e,c[n]=c[n+256]=o[e%12]}},e.seed(0);var s=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,d=1/6;function f(t){return t*t*t*(t*(6*t-15)+10)}function l(t,n,e){return(1-e)*t+e*n}e.simplex2=function(t,n){var e,r,o=(t+n)*s,a=Math.floor(t+o),d=Math.floor(n+o),f=(a+d)*u,l=t-a+f,m=n-d+f;l>m?(e=1,r=0):(e=0,r=1);var h=l-e+u,v=m-r+u,p=l-1+2*u,x=m-1+2*u,b=c[(a&=255)+i[d&=255]],j=c[a+e+i[d+r]],O=c[a+1+i[d+1]],w=.5-l*l-m*m,g=.5-h*h-v*v,y=.5-p*p-x*x;return 70*((w<0?0:(w*=w)*w*b.dot2(l,m))+(g<0?0:(g*=g)*g*j.dot2(h,v))+(y<0?0:(y*=y)*y*O.dot2(p,x)))},e.simplex3=function(t,n,e){var r,o,a,s,u,f,l=.3333333333333333*(t+n+e),m=Math.floor(t+l),h=Math.floor(n+l),v=Math.floor(e+l),p=(m+h+v)*d,x=t-m+p,b=n-h+p,j=e-v+p;x>=b?b>=j?(r=1,o=0,a=0,s=1,u=1,f=0):x>=j?(r=1,o=0,a=0,s=1,u=0,f=1):(r=0,o=0,a=1,s=1,u=0,f=1):b<j?(r=0,o=0,a=1,s=0,u=1,f=1):x<j?(r=0,o=1,a=0,s=0,u=1,f=1):(r=0,o=1,a=0,s=1,u=1,f=0);var O=x-r+d,w=b-o+d,g=j-a+d,y=x-s+2*d,M=b-u+2*d,z=j-f+2*d,F=x-1+.5,S=b-1+.5,A=j-1+.5,T=c[(m&=255)+i[(h&=255)+i[v&=255]]],C=c[m+r+i[h+o+i[v+a]]],_=c[m+s+i[h+u+i[v+f]]],k=c[m+1+i[h+1+i[v+1]]],G=.6-x*x-b*b-j*j,R=.6-O*O-w*w-g*g,U=.6-y*y-M*M-z*z,P=.6-F*F-S*S-A*A;return 32*((G<0?0:(G*=G)*G*T.dot3(x,b,j))+(R<0?0:(R*=R)*R*C.dot3(O,w,g))+(U<0?0:(U*=U)*U*_.dot3(y,M,z))+(P<0?0:(P*=P)*P*k.dot3(F,S,A)))},e.perlin2=function(t,n){var e=Math.floor(t),r=Math.floor(n);t-=e,n-=r;var o=c[(e&=255)+i[r&=255]].dot2(t,n),a=c[e+i[r+1]].dot2(t,n-1),s=c[e+1+i[r]].dot2(t-1,n),u=c[e+1+i[r+1]].dot2(t-1,n-1),d=f(t);return l(l(o,s,d),l(a,u,d),f(n))},e.perlin3=function(t,n,e){var r=Math.floor(t),o=Math.floor(n),a=Math.floor(e);t-=r,n-=o,e-=a;var s=c[(r&=255)+i[(o&=255)+i[a&=255]]].dot3(t,n,e),u=c[r+i[o+i[a+1]]].dot3(t,n,e-1),d=c[r+i[o+1+i[a]]].dot3(t,n-1,e),m=c[r+i[o+1+i[a+1]]].dot3(t,n-1,e-1),h=c[r+1+i[o+i[a]]].dot3(t-1,n,e),v=c[r+1+i[o+i[a+1]]].dot3(t-1,n,e-1),p=c[r+1+i[o+1+i[a]]].dot3(t-1,n-1,e),x=c[r+1+i[o+1+i[a+1]]].dot3(t-1,n-1,e-1),b=f(t),j=f(n),O=f(e);return l(l(l(s,h,b),l(u,v,b),O),l(l(d,p,b),l(m,x,b),O),j)},t.exports=e},33:function(t,n,e){},34:function(t,n,e){},39:function(t,n,e){"use strict";e.r(n);var r=e(6),o=e.n(r),a=e(26),i=e.n(a),c=(e(33),e(34),e(29)),s=e(11),u=e(5),d=e(7);function f(t){var n=t.position,e=t.rotation,o=t.grid,a=o.width,i=o.height,c=o.sep,f=t.zOfXYT,l=t.colorOfXYZT,m=t.anim,h=m.init,v=m.update,p=Object(r.useRef)(),x=h,b=Object(r.useMemo)((function(){for(var t=[],n=[],e=[],r=0;r<i;r++)for(var o=0;o<a;o++){var s=c*(o-(a-1)/2),u=c*(r-(i+1)/2),d=f(s,u,x);t.push(s,u,d);var m=l(s,u,d,x);n.push(m.r,m.g,m.b),e.push(0,0,1)}return{positions:t=new Float32Array(t),colors:n=new Float32Array(n),normals:e=new Float32Array(e)}}),[a,i,c,f,l,x]),j=b.positions,O=b.colors,w=b.normals,g=Object(r.useMemo)((function(){for(var t=[],n=0,e=0;e<i-1;e++){for(var r=0;r<a-1;r++)t.push(n,n+1,n+a+1),t.push(n+a+1,n+a,n),n++;n++}return new Uint16Array(t)}),[a,i]),y=Object(r.useRef)(),M=Object(r.useRef)();return Object(s.c)((function(){x=v(x);for(var t=y.current.array,n=M.current.array,e=0,r=0;r<i;r++)for(var o=0;o<a;o++){t[e+2]=f(t[e],t[e+1],x);var c=l(t[e],t[e+1],t[e+2],x);n[e]=c.r,n[e+1]=c.g,n[e+2]=c.b,e+=3}y.current.needsUpdate=!0,M.current.needsUpdate=!0})),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("mesh",{ref:p,position:n,rotation:e,children:[Object(d.jsxs)("bufferGeometry",{children:[Object(d.jsx)("bufferAttribute",{ref:y,attachObject:["attributes","position"],array:j,count:j.length/3,itemSize:3}),Object(d.jsx)("bufferAttribute",{ref:M,attachObject:["attributes","color"],array:O,count:O.length/3,itemSize:3}),Object(d.jsx)("bufferAttribute",{attachObject:["attributes","normal"],array:w,count:w.length/3,itemSize:3}),Object(d.jsx)("bufferAttribute",{attach:"index",array:g,count:g.length,itemSize:1})]}),Object(d.jsx)("meshStandardMaterial",{vertexColors:!0,side:u.DoubleSide})]})})}var l=e(25),m=e.n(l);function h(t){var n=t.position,e=t.rotation,r=Math.floor(Math.random()*Math.pow(2,16));m.a.seed(r);return Object(d.jsx)(f,{position:n,rotation:e,grid:{width:100,height:100,sep:.2},zOfXYT:function(t,n,e){return function(t,n,e){for(var r=1,o=1,a=0,i=0;i<20;i++)a+=r*Object(l.perlin3)(t*o*.125,n*o*.125,e),r*=.6,o*=2;return a}(t,n,e)},colorOfXYZT:function(t,n,e,o){var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.PI/4;return function(){var n=1e4*Math.sin(t++);return n-Math.floor(n)}}(1001*t-7*n+r),i=function(){return.01*a()};return{r:e+i(),g:e/5+i(),b:Math.sqrt(Math.pow(t,2)+Math.pow(n,2))/75+i()}},anim:{init:0,update:function(t){return t+.002}}})}var v="\nprecision mediump float;\nvarying vec2 vUv;\nvarying vec3 pos;\n\nuniform float u_time;\nuniform float rad;\n\n".concat("\n/* discontinuous pseudorandom uniformly distributed in [-0.5, +0.5]^3 */\nvec3 random3(vec3 c) {\n\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\tvec3 r;\n\tr.z = fract(512.0*j);\n\tj *= .125;\n\tr.x = fract(512.0*j);\n\tj *= .125;\n\tr.y = fract(512.0*j);\n\treturn r-0.5;\n}\n\n/* skew constants for 3d simplex functions */\nconst float F3 =  0.3333333;\nconst float G3 =  0.1666667;\n\n/* 3d simplex noise */\nfloat simplex3d(vec3 p) {\n\t /* 1. find current tetrahedron T and it's four vertices */\n\t /* s, s+i1, s+i2, s+1.0 - absolute skewed (integer) coordinates of T vertices */\n\t /* x, x1, x2, x3 - unskewed coordinates of p relative to each of T vertices*/\n\t \n\t /* calculate s and x */\n\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t vec3 x = p - s + dot(s, vec3(G3));\n\t \n\t /* calculate i1 and i2 */\n\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t vec3 i1 = e*(1.0 - e.zxy);\n\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t \t\n\t /* x1, x2, x3 */\n\t vec3 x1 = x - i1 + G3;\n\t vec3 x2 = x - i2 + 2.0*G3;\n\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t \n\t /* 2. find four surflets and store them in d */\n\t vec4 w, d;\n\t \n\t /* calculate surflet weights */\n\t w.x = dot(x, x);\n\t w.y = dot(x1, x1);\n\t w.z = dot(x2, x2);\n\t w.w = dot(x3, x3);\n\t \n\t /* w fades from 0.6 at the center of the surflet to 0.0 at the margin */\n\t w = max(0.6 - w, 0.0);\n\t \n\t /* calculate surflet components */\n\t d.x = dot(random3(s), x);\n\t d.y = dot(random3(s + i1), x1);\n\t d.z = dot(random3(s + i2), x2);\n\t d.w = dot(random3(s + 1.0), x3);\n\t \n\t /* multiply d by w^4 */\n\t w *= w;\n\t w *= w;\n\t d *= w;\n\t \n\t /* 3. return the sum of the four surflets */\n\t return dot(d, vec4(52.0));\n}\n\n/* const matrices for 3d rotation */\nconst mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\nconst mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\nconst mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\n/* directional artifacts can be reduced by rotating each octave */\nfloat simplex3d_fractal(vec3 m) {\n    return   0.5333333*simplex3d(m*rot1)\n\t\t\t+0.2666667*simplex3d(2.0*m*rot2)\n\t\t\t+0.1333333*simplex3d(4.0*m*rot3)\n\t\t\t+0.0666667*simplex3d(8.0*m);\n}\n","\n\nvoid main() {\n    vUv = uv;\n    vec3 dir = position/length(position);\n    vec3 trans = dir*rad-0.2*simplex3d(vec3(dir.xy, u_time/2.))*dir;\n    pos = trans;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(trans, 1.0 );\n}\n"),p=function(t){var n=t.position,e=t.rotation,o=t.wireframe,a=void 0!==o&&o,i=Object(r.useRef)();Object(s.c)((function(t){var n=t.clock;i.current.material.uniforms.u_time.value=.001*n.oldTime}));return Object(d.jsxs)("mesh",{position:n,rotation:e,ref:i,children:[Object(d.jsx)("boxGeometry",{args:[1,1,1,10,10,10]}),Object(d.jsx)("shaderMaterial",{attach:"material",uniforms:{u_time:{type:"f",value:0},rad:{type:"f",value:1}},vertexShader:v,fragmentShader:"\nprecision mediump float;\n\nvarying vec2 vUv;\nvarying vec3 pos;\n\nuniform float u_time;\n\nvoid main() {\n    // colour is RGBA: u, v, 0, 1\n    float r = 5.*(length(pos)-0.5);\n    // r = 5.*(pos.x/2.+0.5); // pos.x [0, 1]\n\n    gl_FragColor = vec4(pos/2.+0.5, 1. );\n    gl_FragColor = vec4(r, r/5., 0., 1.);\n}\n",wireframe:a})]})};function x(){var t=Object(s.d)(),n=t.camera,e=t.gl.domElement,o=Object(r.useRef)();return Object(s.c)((function(){return o.current.update()})),Object(d.jsx)("orbitControls",{ref:o,args:[n,e]})}function b(){return Object(d.jsxs)(s.a,{colorManagement:!0,camera:{position:[0,2,10],fov:75},children:[Object(d.jsx)("ambientLight",{}),Object(d.jsxs)(r.Suspense,{fallback:null,children:[Object(d.jsx)(h,{position:[0,0,0],rotation:[-Math.PI/2,0,0]}),Object(d.jsx)(p,{position:[-2,2.5,0],rotation:[0,0,0],wireframe:!0}),Object(d.jsx)(p,{position:[2,2.5,0],rotation:[0,0,0]})]}),Object(d.jsx)(x,{})]})}Object(s.b)({OrbitControls:c.a});var j=function(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("div",{className:"anim",children:Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(b,{})})}),Object(d.jsx)("a",{className:"badge",href:"https://github.com/claeb101/procedural-mesh-animation",alt:"Contributors",children:Object(d.jsx)("img",{src:"https://img.shields.io/github/last-commit/claeb101/procedural-mesh-animation",alt:""})})]})},O=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,40)).then((function(n){var e=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;e(t),r(t),o(t),a(t),i(t)}))};i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root")),O()}},[[39,1,2]]]);
//# sourceMappingURL=main.e2a08b85.chunk.js.map